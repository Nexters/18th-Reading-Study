# 객체 지향 프로그래밍

## 영화 예매 시스템

### 요구 사항 살펴보기

- 영화
    - 영화에 대한 기본 정보
    - 제목, 상영시간, 가격
- 상영
    - 실제 관객이 영화를 관람하는 사건
    - 하나의 영화는 하루에 한 번 이상 상영된다.
    - 실제 예매하는 대상은 영화가 아니라 상영이다.
- 할인
    - 할인 조건
        - 할인 여부 결정
        - 순서 조건, 기간 조건
        - 다수의 조건을 걸 수 있다.
    - 할인 정책
        - 할인 요금 결정
        - 금액 할인, 비율 할인
        - 영화 별 하나의 정책만 할당할 수 있다.
    
## 객체 지향 프로그래밍을 향해
### 협력, 객체, 클래스

- 어떤 클래스가 필요한지 고민하기 전에 어떤 객체가 필요한지 고민한다.
    - 클래스는 객체를 추상화한 것이므로 클래스를 설계하기 위해서는 객체가 어떤 상태와 행동을 가지는지 먼저 결정해야 한다.
- 객체는 독립적인게 아니라 기능 구현을 위해 협력하는 공동체의 일원으로 본다.
    

### 도메인의 구조를 따르는 프로그램 구조

- 도메인
    - 문제를 해결하기 위해 사용자가 프로그램을 사용하는 분야
    
객체 지향은 요구사항을 객체와 동일한 관점에서 바라볼 수 있어 도메인을 구성하는 개념을 객체와 클래스로 매끄럽게 연결할 수 있다. 따라서 클래스의 구조는 도메인의 구조와 유사한 형태를 띠어야 한다.

### 클래스 구현하기

```java
import java.time.LocalDateTime;

public class Screening {
    private Movie movie;
    private int sequence;
    private LocalDateTime whenScreened;

    public Screening(Movie movie, int sequence, LocalDateTime whenScreened) {
        this.movie = movie;
        this.sequence = sequence;
        this.whenScreened = whenScreened;
    }

    public LocalDateTime getStartTime() {
        return whenScreened;
    }
    
    public boolean isSequence(int sequence) {
        return this.sequence == sequence;
    }
    
    public Money getMovieFee() {
        return movie.getFee();
    }
}
```

클래스를 구현하거나 다른 사람이 개발한 클래스를 사용할 때는 클래스의 경계를 구분 짓는 것이 중요하다. private으로 외부에서 객체의 속성에 직접 접근할 수 없도록 막고 public 메서드를 통해서만 내부 상태를 변경할 수 있게 해야한다.

#### 자율적인 객체

- 객체는 상태와 행동을 함께 갖는 복합적인 존재다.
- 객체는 스스로 판단하고 생동하는 자율적인 존재다.

객체 지향 언어는 캡슐화와 더불어 public, private 등 접근 수정자로 접근을 통제한다. 객체를 자율적인 존재로 만들기 위해 외부 간섭을 최소화하는 것이다.

캡슐화와 접근 제어는 객체를 두 부분으로 나눈다.

- 퍼블릭 인터페이스
    - 외부에서 접근 가능한 부분
- 구현(implementation)
    - 오직 내부에서만 접근 가능한 부분
- 인터페이스와 구현의 분리 원칙은 객체 지향의 핵심 원리다.

개발할 때 클래스 속성은 private으로 감추고 외부에 제공해야 하는 일부 메서드만 private으로 선언해야 한다.

#### 프로그래머의 자유

- 클래스 작성자
    - 새로운 데이터 타입을 프로그램에 추가한다.
    - 클라이언트 프로그래머에게 필요한 부분만 공개한다.
- 클라이언트 프로그래머
    - 클래스 작성자가 추가한 데이터 타입을 사용한다.

필요한 것만 공개하는 구현 은닉을 하면 클라이언트 프로그래머가 실수로 숨겨진 부분에 접근하는 것을 막을 수 있다. 클라이언트 프로그래머 입장에서도 내부 구현은 무시한 채 인터페이스만으로도 클래스를 사용할 수 있어 지식의 양을 줄일 수 있다.