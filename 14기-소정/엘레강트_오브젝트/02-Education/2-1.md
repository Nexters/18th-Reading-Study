# 가능하면 적게 캡슐화하세요

- 최대 4개까지만 객체를 캡슐화한다.
- 더 많이 필요하다면 리팩토링을 해야한다.

```java
class Cash {
    private Integer digits;
    private Integer cents;
    private Integer currency;
}
```

Cash 클래스는 3개의 객체를 캡슐화한다. 객체는 객체들의 집합체다. 자동차는 바퀴와 유리의 집합체다. 다른 객체를 캡슐화 하지 않는 객체는 존재할 수 없고 무의미하다.

```java
Cash x = new Cash(29, 95, "USD");
Cash y = new Cash(29, 95, "USD");

x.equals(y);
x == y;
```

필자는 실제 java와 달리 위의 두 값이 true여야 한다고 주장한다. 하지만 java는 내부가 비어있는 객체를 생성할 수 있으며 빈 객체를 복사본과 비교하면 다른 객체라고 판단한다. java가 객체를 보는 방식은 잘못되었다.

- 상태 없는 객체는 존재해서는 안된다.
- 상태는 객체의 식별자여야 한다.
  - 제조사, 모델, 제조년도를 이용하면 내 자동차를 식별할 수 있어야 한다.
  - 4개 이상이 되면 서로를 구분하는 것이 어려워진다.
  - 결과적으로 전체 속성은 객체들로 구성된 트리를 구성하게 된다.
- java의 결함을 피하기 위해 == 연산자 대신 항상 equals() 메서드를 오버라이드 하자.
  - lombok의 @EqualsAndHashCode를 사용해도 된다.
