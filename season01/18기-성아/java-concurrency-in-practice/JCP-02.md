## 객체 구성

  개발자가 코드를 작성하는 과정에서 실수를 한다 하더라도 스레드 안정성을 해치지 않도록 도와주는 클래스 구성방법을 알아본다

  스레드에 안전한 클래스 설계를 위한 고려사항 세 가지가 있다.

- 객체의 상태를 보관하는 변수가 어떤 것인가
- 객체의 상태를 보관하는 변수가 가질 수 있는 값이 어떤 종류, 어떤 범위에 해당하는가?
- 객체 내부의 값을 동시에 사용하고자 할 때 그 과정을 관리할 수 있는 정책

### 인스턴스 한정

  동기화 하고자 하는 객체를 내부로 숨기고 자바 모니터 기법 (synchronized) 로 동기화된 메소드를 통해서만 접근할 수 있게 하여 스레드 안전성을 확보할 수 있다.

### 위임 기법

  객체가 스레드 안전한 상태만 가지고 있고, 상태들이 서로 의존성을 가지지 않는다면 객체는 스레드 안전하다. 심지어 상태를 공개하더라도 스레드 안전하다.

### 스레드가 안전하게 구현된 클래스에 기능 추가

  상속 혹은 재구성을 통해 기능을 추가할 수 있다. 기능을 추가할 때 클래스가 어떤 식으로 락을 제공하고 있는지, 동기화 정책에 대해 알고 클라이언트 락을 사용하는 것이 좋다. 문서가 미흡하여 동기화 정책에 대한 내용이 없다면 올바른 방법으로 동기화 정책을 추측해야 한다.

### 동기화 정책 문서

  동기화를 하고 난 후에 동기화 정책에 대해 문서를 남기는 게 중요하다. 동기화를 하지 않았다면 동기화를 하지 않았다고 명시적으로 남겨야 한다. 큰 일은 아니지만 이후 유지보수할 때 매우 유용하다.
