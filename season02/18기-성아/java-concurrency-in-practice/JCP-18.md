11장에서는 병렬 프로그램의 성능을 분석하고 모니터링하고 성능을 향상시킬 수 있는 방법에 대해 알아본다. 성능을 높이는 방법은 일반적으로 애플리케이션 내부 구조를 복잡하게 만들고 안전성과 활동성에 문제가 생길 확률이 높다. 

  더 작은 자원을 사용하면서 더 많은 일을 하면 성능이 높아진다고 한다. CPU, 메모리, 네트워크 속도, 디스크 속도, 데이터베이스 처리 속도, 디스크 용량이 자원이다. 어떤 작업을 실행할 때 특정 자원이 충분하지 못해 성능이 떨어지는 현상이 발생하면 작업 성능이 해당 자원에 좌우된다고 한다.

  성능을 높이고자 스레드를 추가적으로 사용한다. 기존 작업이 실행하는 동안에 새로 등록된 작업을 실행할 준비를 하기 때문에 애플리케이션의 응답 속도를 향상시킨다.

  여러 개의 스레드를 사용하려 한다면 단일 스레드를 사용할 때 보다 성능상의 비용을 지불해야 한다. 스레드 간 작업 내용을 조율하는데 필요한 오버헤드(락 걸기, 신호 보내기, 메모리 동기화 등), 잦은 컨텍스트 스위칭, 잦은 스레드 생성 및 제거, 여러 스레드를 효율적으로 스케쥴링 하는 비용이 있다. 비용을 지불하고 스레드를 효율적으로 적용하면 성능이나 응답성이 높아지고 처리 용량이 커지는 장점이 있다. 잘못 설계된 병렬 프로그래밍은 순차적으로 작업하는 프로그램보다 오히려 느리게 동작한다.

  프로그램이 확보할 수 있는 모든 자원을 최대한 활용해야 한다. 남은 자원도 최대한 활용해야 한다. = CPU가 최대한 바쁘게 동작해야 한다.

### 성능 vs 확장성

  확장성은 추가적인 장비를 사용해 처리량이나 용량을 얼마나 쉽게 키울 수 있는지를 의미한다. 11장에서는 확장성을 중점적으로 다룬다. 성능을 향상시키는 것과 확장성을 확보하는 건 다른 일이다. 

  성능은 특정 작업을 처리하는 속도가 얼마나 빠른가, 동일한 자원을 갖고 있을 때 얼마나 많은 양의 작업을 할 수 있는가를 뜻하지만, 확장성은 오히려 작업의 양을 늘릴 수 있다.

  단일 구조가 일반적으로 성능이 좋지만, 최대 부하를 넘어서는 작업량을 만족해야 하면 성능을 향상시키기 어려워 문제를 겪는다. 이런 경우 확장성이 중요해진다. 

### 성능 vs 안전성

  안전성은 코드의 가독성과 유지보수의 용이함을 의미한다. 성능을 향상시키기 위해서 이해하기 어려운 코드, 유지보수하기 어려운 코드를 만들기 쉽고 오류가 발생할 위험이 높아진다. 필요한 성능을 정하고 측정한 결과를 바탕으로 튜닝 여부를 결정해야 한다. 

### 암달의 법칙

하드웨어 자원을 추가로 투입했을 때 이론적으로 속도가 얼마나 빨리질지 예측하는 방법

순차적으로 실행해야하는 작업 비율 F , 프로세서의 개수 N

속도의 증가량 ≤ $1 \over {F+(1-F)\over {N}}$

암달의 법칙을 기반으로 어느정도 확장했을 때 가장 효율적인지 계산해서 사용해야 한다.
