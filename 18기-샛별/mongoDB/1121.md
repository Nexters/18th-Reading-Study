# 2장. 몽고DB 기본

## 2.1 도큐먼트

몽고DB의 핵심은 **정렬된 키와 연결된 값의 집합으로 이루어진 도큐먼트다.**
키는 문자열이고, 값은 데이터형이어야 한다. 또한 데이터형과 대소문자를 구별한다.

### 키의 주의사항
1. 키는 \0(null 문자)를 포함하지 않는다.
2. .과 $ 문자는 보통 예약어로 취급해야 한다.
3. 키는 중복될 수 없다.

## 2.2 컬렉션

**컬렉션**은 도큐먼트의 모음으로 **동적 스키마**를 가진다. (= 하나의 컬렉션 내 도큐먼트들이 모두 다른 구조를 가질 수 있다.)
그럼에도 `같은 컬렉션에 다른 종류 도큐먼트를 저장하는 것은 추후 번거로워진다`, `컬렉션별로 목록을 뽑는 것이 쉽다`, `데이터 지역성과 디스크 탐색시간이 좋다`, `인덱스가 있으면 특정 구조를 가져야 한다`는 특징으로 인해 컬렉션을 분리한다. 애플리케이션 스키마는 기본적으로 필요하지 않지만 정의하면 좋다.

### 컬렉션 네이밍 규칙

1. 빈 문자열은 유효하지 않다.
2. null 문자는 컬렉션 명에 사용할 수 없다.
3. `system.`으로 시작하는 컬렉션 명은 예약어이므로 사용할 수 없다.
4. 사용자가 만든 컬렉션은 `$`를 포함할 수 없다.

### 서브컬렉션

서브컬렉션의 네임스페이스에 `.` 문자를 사용해 컬렉션을 체계화한다.
이는 단지 체계화를 위함이며 실제로는 아무 관계가 없다.

## 2.3 데이터베이스

몽고DB의 단일 **인스턴스**는 여러 데이터베이스를 호스팅할 수 있으며 각 데이터베이스를 완전히 독립적으로 취급할 수 있다.
데이터베이스는 컬렉션과 마찬가지로 이름으로 식별된다.

### 예약된 데이터베이스 이름
- admin : 인증, 권한 부여
- local : 단일 서버에 대한 데이터 저장
- config : 샤드의 정보 저장

## 2.5 몽고DB 셸 소개

셸은 완전한 자바스크립트 해석기로 임의의 자바스크립트 프로그램을 실행한다.

## 2.6 데이터형

- null : 존재하지 않는 필드
- boolean : 참과 거짓
- 숫자 : 64비트 부동소수점 수가 기본, NumberInt(4바이트), NumberLong(8바이트)
- 문자열 : UTF-8
- 날짜 : 1970년 1월 1일부터의 시간을 1/1000초 단위로 나타내는 64비트 정수로 저장
- 정규표현식
- 배열
- 내장 도큐먼트
- 객체 ID : 12바이트 ID
  - 몽고DB에 저장된 모든 도큐먼트는 "_id" 키를 가진다.
- 이진 데이터 : 임의의 바이트 문자열
- 코드

> 몽고DB는 배열과 내장도큐먼트 등의 구조를 '이해'하고, 인덱스를 구성하고, 쿼리하며, 갱신한다.
