> 1장 다 읽음 

## 1.5 메시지

- HTTP 메시지는 단순한 줄 단위의 문자열 : 요청 메시지, 응답 메시지
- HTTP 메시지는 3가지 부분으로 이루어져 있다.
  - **시작줄** : 메시지의 첫 줄, 무엇을 해야 하는지 || 무슨 일이 일어났는지
  - **헤더** : 시작줄 다음에 나오는 0개 이상의 헤더 필드, 쌍점(:)으로 구분되어 있는 이름과 값으로 구성, 헤더는 빈 줄로 끝남
  - **본문** : 어떤 종류의 데이터든 들어갈 수 있는 메시지 본문, 임의의 이진 데이터를 포함할 수 있음

## 1.6 TCP 커넥션

### 1) TCP/IP

- HTTP는 애플리케이션 계층 프로토콜
- 네트워크 통신의 핵심적인 세부사항에 대해서 신경 쓰지 않는 대신 대중적이고 신뢰성 있는 인터넷 전송 프로토콜인 `TCP/IP`에게 맡긴다.
- TCP는 `오류 없는 데이터 전송` `순서에 맞는 전달` `조각나지 않는 데이터 스트림`을 제공한다.
- TCP/IP는 패킷 교환 네트워크 프토토콜의 집합으로 각 네트워크와 하드웨어 특성을 숨기고, 어떤 종류의 컴퓨터나 네트워크든 서로 신뢰성 있는 의사소통을 하게 해 준다.

### 2) 접속, IP 주소 그리고 포트번호

- HTTP 클라이언트가 서버에 메시지를 전송할 수 있게 되기 전에 IP 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 맺어야 한다.
- HTTP 서버의 IP 주소와 포트번호를 알아내는 방법? URL은 리소스를 가지고 있는 장비에 대한 IP 주소를 알려준다! HTTP URL에 포트번호가 빠진 경우에는 기본값 80이라고 가정하면 된다.

## 1.7 프로토콜 버전

#### HTTP/0.9 (1991)

- 심각한 디자인 결함이 다수 있고 구식 클라이언트하고만 같이 사용 가능
- GET 메서드만 지원, MIME 타입이나 헤더, 버전 번호 지원하지 않음
- 간단한 HTML 객체를 받아오기 위해 만들어짐

#### HTTP/1.0

- 처음으로 널리 쓰이기 시작한 버전
- 버전 번호, 헤더, 추가 메서드, 멀티미디어 객체 처리 추가

#### HTTP/1.0+ (1990년대 중반)

- `keep-alive` 커넥션, 가상 호스팅 지원, 프락시 연결 지원 등

#### HTTP/1.1 (1990년대 후반)

- HTTP 설계의 구조적 결함 교정, 성능 최적화, 잘못된 기능 제거

#### HTTP/2.0

- 구글의 SPDY 프로토콜을 기반으로 설계가 진행

## 1.8 웹의 구성요소

- 프락시 : 클라이언트와 서버 사이에 위치한 HTTP 중개자
- 캐시 : 많이 찾는 웹 페이지를 클라이언트 가까이에 보관하는 HTTP 창고
- 게이트웨이 : 다른 애플리케이션과 연결된 특별한 웹 서버
- 터널 : 단순히 HTTP 통신을 전달하기만 하는 특별한 프락시
- 에이전트 : 자동화된 HTTP 요청을 만드는 준지능적 웹클라이언트

### 1) 프락시

- 클라이언트의 모든 HTTP 요청을 받아 서버에 전달한다.
- 주로 보안을 위해 사용되며 신뢰할 만한 중개자 역할을 한다.
- 또한 요청과 응답을 필터링한다.

### 2) 캐시

- 웹캐시와 캐시 프락시는 자주 찾는 문서의 사본을 저장해두는 특별한 종류의 HTTP 프락시 서버
- HTTP는 캐시를 효율적으로 동작하게 하고 캐시된 컨텐츠를 최신 버전으로 유지하면서 동시에 프라이버시도 보호하기 위한 많은 기능을 정의한다.

### 3) 게이트웨이

- 다른 서버들의 중개자로 동작하는 특별한 서버
- 주로 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용된다.
- 언제나 스스로가 리소스를 갖고 있는 진짜 서버인 것처럼 요청을 다루므로 클라이언트는 게이트웨이와 통신하고 있음을 알아채지 못한다.

### 4) 터널

- 터널은 두 커넥션 사이에 raw 데이터를 열어보지 않고 그대로 전달해주는 HTTP 애플리케이션으로 주로 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전송하기 위해 사용된다.
- 대표적 예 : 암호화된 SSL 트래픽을 HTTP 커넥션으로 전송함으로써 웹 트래픽만 허용하는 사내 방화벽 통과

### 5) 에이전트

- 사용자 에이전트는 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램이다
