> p33-63

### 2. 웹 최적화

**프런트엔드 최적화**

HTML, JS, CSS, Img, File 등의 브라우저 콘텐츠를 다운로드, 로딩, 렌더링할 때 속도가 빨라지게 한다. 웹 성능은 프런트엔드에서 좌우될 수도 있다.

- 스크립트를 병합하여 브라우저의 호출 개수를 줄임
- 스크립트 크기를 최소화해 바이트 자체를 줄임
- 스크립트를 gzip 등으로 압축하여 전달
- WebP 등으로 브라우저 이미지 형식을 최적화
- 이미지 손실, 무손실 압축
- Cache-Control 응답 헤더를 통해 브라우저 캐시를 충실히 사용
- 도메인 수를 줄여 DNS 조회를 최소화
- DNS 정보 미리 읽어 오기
- CSS를 HTML 상단에, 자바스크립트를 HTML의 하단에 위치시키기
- 페이지 미리 읽어 오기(page prefetching)
- 타사 스크립트가 웹 성능을 방해하지 않도록 조정



**백엔드 최적화**

시스템들을 튜닝해 정상 출력을 만드는 것이 목표. 프런트엔드 최적화에 비해 가시적인 효과가 크지 않지만, 네트워크를 정상적으로 사용하고 콘텐츠를 전달하기 위해 반드시 필요한 요소

- DNS 응답이 빨라지도록 서버 증설
- DNS 응답을 빠르게 할 수 있도록 DNS 정보를 최대한 캐싱
- 웹 서버가 있는 데이터 센터의 네트워크 출력/대역폭 증설
- 웹 서버, 웹 애플리케이션 서버의 CPU/RAM 증설
- 프록시 서버를 설정하여 웹 콘텐츠를 캐싱
- CDN을 사용해 인터넷상에 콘텐츠 캐싱
- 데이터베이스 정규화로 디스크 I/O 최적화
- 데이터베이스 캐싱으로 응답을 빠르게
- 로드 밸런싱을 통해 가장 성능이 좋은 웹 서버로 요청을 연결
- 웹 애플리케이션 로직을 가볍고 빠르게 개발



**프로토콜 최적화**

프로토콜 자체의 효과를 극대화하면 웹 서버가 클라이언트에게 콘텐츠를 최대 속도와 최저 지연 시간으로 전달할 수 있다.

웹에서는 TCP/IP의 일종인 HTTP를 사용해 콘텐츠를 전달한다.

TCP 네트워크에서 대표적인 성능 지표는 대역폭과 지연시간이다. 대역폭은 특정 시간 동안 얼마나 많은 네트워크 트래픽을 보낼 수 있는지 시간당 전송량을 의미한다. 크기가 큰 이미지 파일을 다운로드 하려면 완료 시간은 클라이언트와 서버 사이 대역폭에 영향을 받는다.

지연 시간은 클라이언트와 서버 간 콘텐츠를 전달하는 물리적인 시간을 말한다. 브라우저가 콘텐츠를 화면에 렌더링하는 단계는 지연 시간에 포함되지 않는다.

서버와 클라이언트 두 호스트를 모두 왕복하는 데 걸리는 지연 시간은 Round Trip Time(RTT)라고 한다. 인터넷상의 게임이나 화상 채팅 등의 품질에 영향을 준다. 스트리밍 서비스는 지연 시간이 길고 짧음에 따라 전달받는 영상 파일의 품질을 조절하여 버퍼링을 줄일 수 있는 가변 스트리밍 방식을 사용한다.

TCP 성능이 나빠지면 웹 성능도 영향을 받는다.



**웹 성능을 최적화하는 도메인 운용 방법**

HTML의 DNS 프리페치(prefetch) 기능을 사용하면 웹 페이지에 사용된 도메인들의 DNS를 조회하는 시간이 좀 더 빨라진다. 웹 문서 페이지를 여는 시점에 멀티스레드 방식으로 미리 DNS를 조회해 빠르게 IP 주소를 불러오는 기술이다.

```html
<link rel="dns-prefetch" href="//img.feokorea.com"><link rel="dns-prefetch" href="//script.feokorea.com">
<link rel="dns-prefetch" href="//api.feokorea.com">
```



**내비게이션 타이밍 속성**

performance.timing 이벤트 속성을 통해 페이지 로딩 흐름 순서와 정보를 확인할 수 있다. 성능 지표를 얻고 품질 개선을 위한 방법을 찾을 수 있음.